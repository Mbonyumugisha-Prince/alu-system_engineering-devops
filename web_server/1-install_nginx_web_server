#!/usr/bin/env bash
# Installs and configures Nginx to serve a page containing "Holberton School"
# Stop Apache if it's running
service apache2 stop 2>/dev/null
apt-get -y purge apache2 apache2-utils apache2-bin apache2.2-common 2>/dev/null
# Update package lists and install nginx
apt-get update
apt-get install -y nginx
# Configure nginx to serve "Holberton School" at root
echo "Holberton School" > /var/www/html/index.nginx-debian.html
# Ensure Nginx uses the correct default page
sed -i 's/index.html index.nginx-debian.html/index.nginx-debian.html index.html/g' /etc/nginx/sites-available/default
# Make sure nginx is listening on port 80
sed -i 's/listen 80 default_server;/listen 80 default_server;/g' /etc/nginx/sites-available/default
# Stop nginx if it's running, then start it
service nginx stop 2>/dev/null
service nginx start
# Output 200 status code
echo 200
